<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Upload | TopNotch Assets</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  padding:40px;
  background:#070814;
  color:#fff;
  font-family:Inter,system-ui,sans-serif;
}
.container{max-width:1000px;margin:auto;}
.model-box{
  background:#0f1324;
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  padding:20px;
  margin-bottom:20px;
}
input{width:100%;padding:12px;margin-bottom:10px;border-radius:12px;background:#11162a;border:1px solid rgba(255,255,255,.1);color:#fff;}
button{padding:14px;border-radius:14px;border:none;font-weight:600;cursor:pointer;}
.add-btn{background:#22c55e}
.upload-btn{background:#6467ff;width:100%;margin-top:20px}
</style>
</head>

<body>
<div class="container">
  <h2>Admin Bulk Upload</h2>
  <div id="models"></div>
  <button class="add-btn" onclick="addModel()">+ Add Model</button>
  <button class="upload-btn" onclick="uploadAll()">Upload All</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyBy5JEPEcplViq8AkK-_uY8JXU5iHUM6ns",
  authDomain: "top-notch-log-data.firebaseapp.com",
  projectId: "top-notch-log-data"
});

const auth = firebase.auth();
const db = firebase.firestore();

const ADMIN_EMAILS = ["hrd9011@gmail.com","hphphp9011@gmail.com"];

auth.onAuthStateChanged(user=>{
  if(!user || !ADMIN_EMAILS.includes(user.email)){
    alert("Admin only");
    location.href="index.html";
  }
  addModel();
});

function addModel(){
  const box = document.createElement("div");
  box.className="model-box";
  box.innerHTML = `
    <input placeholder="Model Name">
    <input placeholder="Category (EXACT folder name)">
    <input placeholder="Model file (emma.glb)">
    <input placeholder="Download file (emma.zip)">
    <input placeholder="Thumbnail URL">
    <input placeholder="Game">
    <input placeholder="Tags (comma separated)">
  `;
  models.appendChild(box);
}

async function uploadAll(){
  const boxes = document.querySelectorAll(".model-box");
  for(const box of boxes){
    const i = box.querySelectorAll("input");
    await db.collection("models").add({
      name: i[0].value,
      category: i[1].value,
      modelFile: i[2].value,
      downloadFile: i[3].value,
      thumbnail: i[4].value,
      game: i[5].value,
      tags: i[6].value.split(",").map(t=>t.trim()),
      likesCount:0,
      downloadsCount:0,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    });
  }
  alert("Uploaded ðŸš€");
  models.innerHTML="";
  addModel();
}
</script>
</body>
</html>
